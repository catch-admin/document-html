(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{825:function(a,t,s){"use strict";s.r(t);var e=s(113),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"faq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[a._v("#")]),a._v(" FAQ")]),a._v(" "),s("h3",{attrs:{id:"为什么项目安装成功之后无法访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么项目安装成功之后无法访问"}},[a._v("#")]),a._v(" 为什么项目安装成功之后无法访问")]),a._v(" "),s("ul",[s("li",[a._v("安装项目之后，打开 "),s("code",[a._v("DEBUG")]),a._v("，将 "),s("code",[a._v(".env")]),a._v(" 的 "),s("code",[a._v("debug")]),a._v(" 设置为 "),s("code",[a._v("true")]),a._v(".")]),a._v(" "),s("li",[a._v("不要直接访问 "),s("code",[a._v("PHP")]),a._v(" 项目，即使你在配置完域名之后.")])]),a._v(" "),s("h3",{attrs:{id:"为什么权限添加之后没有生效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么权限添加之后没有生效"}},[a._v("#")]),a._v(" 为什么权限添加之后没有生效")]),a._v(" "),s("p",[s("code",[a._v("CatchAdmin")]),a._v(" 在用户登录之后，会将登录用户的权限信息缓存起来。所以需要刷新一下后台重新拉取信息。")]),a._v(" "),s("h4",{attrs:{id:"常见错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[a._v("#")]),a._v(" 常见错误")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Cloud not Create token :strpos() expect parameter 1 to be string. array give\n")])])]),s("p",[a._v("请检查 .env 文件是否生成了 jwt 密钥。如果没有，请执行")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("php think jwt:create\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("如果还是不行，请检查是否有 .env 文件")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('There are no commands defined in the "jwt" namespace.\n')])])]),s("p",[a._v("解决方案有两个，均由于 Composer 升级导致的。")]),a._v(" "),s("ul",[s("li",[a._v("降低 composer 版本, "),s("code",[a._v("composer self-update --rollback")])]),a._v(" "),s("li",[a._v("升级 "),s("code",[a._v("tp")]),a._v(" 核心版本，"),s("code",[a._v("composer update")]),a._v(" 即可")])]),a._v(" "),s("blockquote",[s("p",[a._v("目前推荐第一种，防止有其他包没有做适配工作。激进点可以选择第二种，毕竟 "),s("code",[a._v("composer2")]),a._v(" 太香了。")])]),a._v(" "),s("h2",{attrs:{id:"为什么找不到-catchadmin-的-sql-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么找不到-catchadmin-的-sql-文件"}},[a._v("#")]),a._v(" 为什么找不到 CatchAdmin 的 SQL 文件")]),a._v(" "),s("p",[s("code",[a._v("CatchAdmin")]),a._v(" 摒弃了 "),s("code",[a._v("SQL")]),a._v(" 形式的安装，采用了 "),s("code",[a._v("Migration")]),a._v(" 建立数据表，数据表在每个模块都是独立。\n具体可以查看模块下的 "),s("code",[a._v("database")]),a._v(" 文件下的 "),s("code",[a._v("migration")]),a._v("，可以清晰看到每个模块的数据表的迭代情况")]),a._v(" "),s("h2",{attrs:{id:"如何获取登录用户的信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何获取登录用户的信息"}},[a._v("#")]),a._v(" 如何获取登录用户的信息")]),a._v(" "),s("p",[s("code",[a._v("CatchAdmin")]),a._v(" 可以全局获取登录用户信息")]),a._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("ul",[s("li",[a._v("获取用户角色")])]),a._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getRoles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h2",{attrs:{id:"composer-install-安装报错"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#composer-install-安装报错"}},[a._v("#")]),a._v(" composer install 安装报错")]),a._v(" "),s("p",[a._v("如果遇到了 "),s("code",[a._v("think service:discover handling the post-autoload-dump event returned with error code 255")]),a._v(" 错误。")]),a._v(" "),s("ul",[s("li",[a._v("如果存在 "),s("code",[a._v("composer.lock")]),a._v(", 删除 vendor 文件夹以及删除 composer.lock 文件，之后 "),s("code",[a._v("composer install")]),a._v("。")]),a._v(" "),s("li",[a._v("直接 "),s("code",[a._v("composer update")]),a._v(" 即可")])]),a._v(" "),s("h3",{attrs:{id:"上线部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上线部署"}},[a._v("#")]),a._v(" 上线部署")]),a._v(" "),s("p",[a._v("优化自动加载的时候要去除 "),s("a-tag",{attrs:{color:"orange"}},[a._v("require-dev")]),a._v(" 的加载目录")],1),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("composer dump-autoload --no-dev\n")])])]),s("h3",{attrs:{id:"出现权限问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现权限问题"}},[a._v("#")]),a._v(" 出现权限问题")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("chmod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": Operation not permitted\n")])])]),s("p",[a._v("需要改变运行用户, 找到 fpm 运行的用户组，然后使用下面命令，"),s("code",[a._v("fpm 默认是 www-data")]),a._v(", 如果修改了用户，根据实际情况修改即可。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" -R www-data:www-data catch/\n")])])]),s("h3",{attrs:{id:"出现路由为定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现路由为定义"}},[a._v("#")]),a._v(" 出现路由为定义")]),a._v(" "),s("ul",[s("li",[a._v("检查 "),s("a-tag",{attrs:{color:"orange"}},[a._v("runtime\\catch")]),a._v(" 目录下是否有缓存")],1),a._v(" "),s("li",[a._v("检查对应的模块是否开启,  "),s("code",[a._v("module.json")]),a._v(" 文件 "),s("a-tag",{attrs:{color:"orange"}},[a._v("enable")]),a._v(" 字段")],1)]),a._v(" "),s("h3",{attrs:{id:"定义日期类型错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义日期类型错误"}},[a._v("#")]),a._v(" 定义日期类型错误")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("Incorrect "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" value: ‘0000-00-00 00:00:00‘ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("column")]),a._v(" ‘xxxx‘ at row "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),s("p",[a._v("查看 "),s("code",[a._v("sql_mode")]),a._v(" 变量")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("show variables like "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'%sql_mode%'")]),a._v("\n")])])]),s("p",[a._v("如果含有 "),s("code",[a._v("NO_ZERO_IN_DATE")]),a._v(", "),s("code",[a._v("NO_ZERO_DATE")]),a._v(", 则去除。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" @@sql_mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'")]),a._v("\n")])])]),s("p",[a._v("变量最好配置 "),s("code",[a._v("mysql")]),a._v(" 的 "),s("code",[a._v("my.cnf")]),a._v(" 中，否则重启会失效")]),a._v(" "),s("h2",{attrs:{id:"模型注释无法生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模型注释无法生成"}},[a._v("#")]),a._v(" 模型注释无法生成")]),a._v(" "),s("p",[a._v("首先移除")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("composer remove jaguarjack/file-generate --ignore-platform-reqs\n")])])]),s("p",[a._v("在重新安装")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("composer require jaguarjack/file-generate:dev-master --ignore-platform-reqs\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);