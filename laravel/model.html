<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>æ¨¡å‹ | CatchAdmin å®˜ç½‘</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <style>a[title="ç«™é•¿ç»Ÿè®¡"]{display:none}</style>
    <script data-ad-client="ca-pub-1505209242532150" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script src="https://v1.cnzz.com/z_stat.php?id=1279921342&amp;web_id=1279921342"></script>
    <meta name="description" content="åŸºäº Thinkphp & Vue å¼€å‘çš„åå°ç®¡ç†æ¡†æ¶">
    <meta name="keywords" content="catchadmin, åå°ç®¡ç†, å‰åç«¯åˆ†ç¦», thinkphpåå°ç®¡ç†æ¡†æ¶, thinkphpå‰åç«¯åˆ†ç¦»æ¡†æ¶,php, elementui">
    <link rel="preload" href="/assets/css/0.styles.6834c255.css" as="style"><link rel="preload" href="/assets/js/app.fe5d4cb6.js" as="script"><link rel="preload" href="/assets/js/2.1cef47df.js" as="script"><link rel="preload" href="/assets/js/30.c7732a2c.js" as="script"><link rel="prefetch" href="/assets/js/10.513cb2ea.js"><link rel="prefetch" href="/assets/js/11.74b6d3d1.js"><link rel="prefetch" href="/assets/js/12.7e40086c.js"><link rel="prefetch" href="/assets/js/13.37ff5c5c.js"><link rel="prefetch" href="/assets/js/14.4dce3219.js"><link rel="prefetch" href="/assets/js/15.8ba1c321.js"><link rel="prefetch" href="/assets/js/16.2029126a.js"><link rel="prefetch" href="/assets/js/17.d747806f.js"><link rel="prefetch" href="/assets/js/18.3c434d67.js"><link rel="prefetch" href="/assets/js/19.bc4cf447.js"><link rel="prefetch" href="/assets/js/20.13cef39b.js"><link rel="prefetch" href="/assets/js/21.e526a3e5.js"><link rel="prefetch" href="/assets/js/22.2ec2ae83.js"><link rel="prefetch" href="/assets/js/23.06342909.js"><link rel="prefetch" href="/assets/js/24.06fd96a3.js"><link rel="prefetch" href="/assets/js/25.8ae4d380.js"><link rel="prefetch" href="/assets/js/26.c3d4b548.js"><link rel="prefetch" href="/assets/js/27.3c6927ad.js"><link rel="prefetch" href="/assets/js/28.1babbfe8.js"><link rel="prefetch" href="/assets/js/29.1131f0f8.js"><link rel="prefetch" href="/assets/js/3.4d2bdca7.js"><link rel="prefetch" href="/assets/js/31.20403043.js"><link rel="prefetch" href="/assets/js/32.041cf752.js"><link rel="prefetch" href="/assets/js/33.bcc97f79.js"><link rel="prefetch" href="/assets/js/4.621008e0.js"><link rel="prefetch" href="/assets/js/5.ff87de2e.js"><link rel="prefetch" href="/assets/js/6.ea6ea01a.js"><link rel="prefetch" href="/assets/js/7.36926fce.js"><link rel="prefetch" href="/assets/js/8.edab8097.js"><link rel="prefetch" href="/assets/js/9.a84561d3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6834c255.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">CatchAdmin å®˜ç½‘</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          ğŸ é¦–é¡µ
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/docs/">
          ğŸ“–æ–‡æ¡£
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/laravel/" class="router-link-active">
          ğŸ“–Laravel
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/faq/">
          ğŸ¤”FAQ
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/donate/">
          ğŸ‰èµåŠ©åå•
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          ğŸš€ä»“åº“åœ°å€
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><div><div class="ads"><div id="ads_1"><img src="https://cover.kancloud.cn/akasishikelu/thinkphp6!middle"> <span title="åŸºäº catchadmin çš„ Thinkphp 6.0 ä¼ä¸šçº§åå°ç®¡ç†å¼€å‘&amp;æºç åˆ†æ">åŸºäº catchadmin çš„ Thinkphp 6.0 ä¼ä¸šçº§åå°ç®¡ç†å¼€å‘&amp;æºç åˆ†æ</span></div></div> <div role="separator" id="reset-margin" class="ant-divider ant-divider-horizontal ant-divider-dashed"></div></div> <ul class="sidebar-links"><li><a href="/laravel/" aria-current="page" title="ä»‹ç»" class="sidebar-link">ä»‹ç»</a></li><li><a href="/laravel/install.html" title="é¡¹ç›®å®‰è£…" class="sidebar-link">é¡¹ç›®å®‰è£…</a></li><li><a href="/laravel/module.html" title="æ¨¡å—" class="sidebar-link">æ¨¡å—</a></li><li><a href="/laravel/model.html" aria-current="page" title="æ¨¡å‹" class="active sidebar-link">æ¨¡å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/model.html#baseoperate" title="BaseOperate" class="sidebar-link">BaseOperate</a></li><li class="sidebar-sub-header"><a href="/laravel/model.html#è½¯åˆ é™¤" title="è½¯åˆ é™¤" class="sidebar-link">è½¯åˆ é™¤</a></li><li class="sidebar-sub-header"><a href="/laravel/model.html#query-è®°å½•" title="Query è®°å½•" class="sidebar-link">Query è®°å½•</a></li></ul></li><li><a href="/laravel/console.html" title="å‘½ä»¤" class="sidebar-link">å‘½ä»¤</a></li><li><a href="/laravel/form.html" title="è¡¨å•" class="sidebar-link">è¡¨å•</a></li><li><a href="/laravel/table.html" title="è¡¨æ ¼ç»„ä»¶" class="sidebar-link">è¡¨æ ¼ç»„ä»¶</a></li><li><a href="/laravel/macros.html" title="æ‰©å±•æ–¹æ³•" class="sidebar-link">æ‰©å±•æ–¹æ³•</a></li><li><a href="/laravel/excel.html" title="Excel" class="sidebar-link">Excel</a></li><li><a href="/laravel/issue.html" title="å¸¸è§é—®é¢˜" class="sidebar-link">å¸¸è§é—®é¢˜</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="header-anchor">#</a> æ¨¡å‹</h1> <p>å’Œ <code>Thinkphp</code> é¡¹ç›®æ˜¯ä¸€è‡´çš„ï¼Œåœ¨ <code>Laravel</code> ä¸­ä¹Ÿæä¾›äº†åŸºç¡€çš„æ¨¡å‹ <code>CatchModel</code>ã€‚åœ¨æä¾›çš„åŸºç¡€æ“ä½œäº†ä¹ŸåŸºæœ¬ä¿æŒäº†ä¸€è‡´ï¼Œæ‰€ä»¥åˆ‡æ¢è¿‡æ¥è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚ä¸‹é¢æ˜¯åŸºç¡€ <code>Model</code> çš„ä»£ç </p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CatchModel</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">BaseOperate</span><span class="token punctuation">,</span> Trans<span class="token punctuation">,</span> SoftDeletes<span class="token punctuation">;</span>

    <span class="token comment">/**
     * unix timestamp
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dateFormat</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'U'</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * paginate limit
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$perPage</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * enable status
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token constant">ENABLE</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * disable status
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token constant">DISABLE</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @var string[]
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'deleted_at'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @var string[]
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'created_at'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'timestamp'</span><span class="token punctuation">,</span>

        <span class="token string single-quoted-string">'updated_at'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'timestamp'</span><span class="token punctuation">,</span>

        <span class="token string single-quoted-string">'deleted_at'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'timestamp'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>åˆ—è¡¨ä¸ä¼šè¿”å› <code>deleted_at</code> å­—æ®µ</li> <li>å¯¹äº <code>created_at</code>, <code>updated_at</code>, <code>deleted_at</code> å…¨éƒ¨ä½¿ç”¨çš„ <code>int</code> ç±»å‹æ—¶é—´æˆ³</li> <li>æä¾›å¸¸é‡ <code>Disable</code> å’Œ <code>Enable</code> è¡¨ç¤ºå¼€å¯å…³é—­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªå¸¸é‡è¡¨ç¤ºå…¶ä»–çš„æ­£åçŠ¶æ€</li> <li><code>perPage</code> åˆ†é¡µæ¯é¡µå›ºå®šçš„æ˜¾ç¤ºçš„æ•°é‡</li> <li><code>CatchModel</code> è¿˜æ˜¯é»˜è®¤ä½¿ç”¨è½¯åˆ é™¤</li></ul> <h2 id="baseoperate"><a href="#baseoperate" class="header-anchor">#</a> BaseOperate</h2> <h3 id="storeby-array-data"><a href="#storeby-array-data" class="header-anchor">#</a> storeBy(array $data)</h3> <p>ç”¨äºå•ä¸ªæ•°æ®è¿›è¡Œä¿å­˜ï¼Œä¸è¦åœ¨<strong>å¾ªç¯</strong>ä¸­ä½¿ç”¨è¯¥æ–¹æ³•ã€‚âš ï¸æ³¨æ„ <code>storeBy</code> æ˜¯é…åˆæ¨¡å‹ä¸­çš„ <code>fillable</code> å­—æ®µä½¿ç”¨ï¼Œä¸å† <code>fillable</code> ä¸­çš„å­—æ®µå°†ä¸ä¼šè¢«å¡«å……ã€‚</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">storeBy</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="createby-array-data"><a href="#createby-array-data" class="header-anchor">#</a> createBy(array $data)</h3> <p>ç”¨äºå•ä¸ªæ•°æ®è¿›è¡Œä¿å­˜ï¼Œæ”¯æŒå¾ªç¯ä¸­ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ã€‚âš ï¸æ³¨æ„ <code>storeBy</code> æ˜¯é…åˆæ¨¡å‹ä¸­çš„ <code>fillable</code> å­—æ®µä½¿ç”¨ï¼Œä¸å† <code>fillable</code> ä¸­çš„å­—æ®µå°†ä¸ä¼šè¢«å¡«å……</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$data</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">createBy</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updateby-id-array-data-bool"><a href="#updateby-id-array-data-bool" class="header-anchor">#</a> updateBy($id, array $data): bool</h3> <p>è¡¨ç¤ºæ›´æ–°æ•°æ®ã€‚âš ï¸æ³¨æ„ <code>storeBy</code> æ˜¯é…åˆæ¨¡å‹ä¸­çš„ <code>fillable</code> å­—æ®µä½¿ç”¨ï¼Œä¸å† <code>fillable</code> ä¸­çš„å­—æ®µå°†ä¸ä¼šè¢«å¡«å……</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">updateBy</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="firstby-id-array-columns"><a href="#firstby-id-array-columns" class="header-anchor">#</a> firstBy($id, array $columns = ['*'])</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">firstBy</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œä¸ºäº†é…åˆ thinkphp çš„æ–¹æ³•ã€‚å…¶å®åœ¨ Laravel é¡¹ç›®ä¸­ï¼Œä¸ªäººå»ºè®®æ˜¯è¿™ä¹ˆå†™ã€‚</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">getKeyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">firstOr</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'nothing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>OR</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deleteby-id-bool-force-false"><a href="#deleteby-id-bool-force-false" class="header-anchor">#</a> deleteBy($id, bool $force = false)</h3> <p>åˆ é™¤é»˜è®¤è½¯åˆ é™¤ï¼Œå¦‚æœéœ€è¦ç‰©ç†åˆ é™¤ï¼Œ$force = true;</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">deleteBy</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="disorenable-id-string-field-status-bool"><a href="#disorenable-id-string-field-status-bool" class="header-anchor">#</a> disOrEnable($id, string $field = 'status'): bool</h3> <p>å¯¹äºæ•°æ®è¡¨å†…çš„<code>æ­£/å</code>çŠ¶æ€çš„å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨è¯¥å‘æ”¾</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$model</span><span class="token operator">-&gt;</span><span class="token function">disOrEnable</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'clost'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="quicksearch"><a href="#quicksearch" class="header-anchor">#</a> quickSearch()</h3> <p>å¿«é€Ÿæœç´¢ã€‚æä¾›äº†ä¸€ä¸ªæ˜¯å’Œçº¦å®šçš„å­—æ®µï¼Œæ¥é…åˆæœç´¢</p> <ul><li><code>field:like</code> æ¨¡ç³ŠæŸ¥è¯¢å­—æ®µ</li> <li><code>field:startLike</code> æ¨¡ç³ŠæŸ¥è¯¢å­—æ®µ <code>%field</code></li> <li><code>field:endLike</code> æ¨¡ç³ŠæŸ¥è¯¢å­—æ®µ <code>field%</code></li> <li><code>field:gt</code> å¤§äºå­—æ®µ</li> <li><code>field:lt</code> å°äº</li> <li><code>field:ge</code> å¤§äºç­‰äº</li> <li><code>field:le</code> å°äºç­‰äº</li> <li><code>field:in</code> é›†åˆæŸ¥è¯¢ï¼Œå­—æ®µå€¼çº¦å®šä»¥<code>,</code>åˆ†å‰²</li></ul> <h3 id="tree-id-parentid-fields"><a href="#tree-id-parentid-fields" class="header-anchor">#</a> tree($id, $parentId, ...$fields)</h3> <p>è¿™æ ·å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>tree</code> æ–¹æ³•è·å–æ ‘å½¢ç»“æ„, ä¾‹å¦‚ <code>Roles</code></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Roles</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">tree</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'parent_id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'role_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="è½¯åˆ é™¤"><a href="#è½¯åˆ é™¤" class="header-anchor">#</a> è½¯åˆ é™¤</h2> <p><code>Laravel</code> æä¾›çš„é»˜è®¤çš„è½¯åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯ <code>deleted_at</code> å­—æ®µé»˜è®¤å€¼æ˜¯ <code>null</code>, è¿™ä¹Ÿå°±è¡¨ç¤ºå¯¹äºæŸ¥è¯¢æœ€åéƒ½ä¼šåŠ ä¸Š</p> <div class="language-php extra-class"><pre class="language-php"><code>select <span class="token operator">*</span> from users where deleted_at <span class="token operator">=</span> <span class="token constant">null</span>
</code></pre></div><p>ä¸ºäº†å…¼å®¹ <code>thinkphp</code> çš„æŸ¥è¯¢ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¿®æ”¹é»˜è®¤æŸ¥è¯¢, å˜æˆä¸‹é¢è¿™æ ·</p> <div class="language-php extra-class"><pre class="language-php"><code>select <span class="token operator">*</span> from users where deleted_at <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><p><code>Laravel</code> é€šè¿‡è®¾ç½®å…¨å±€æŸ¥è¯¢æ¥æ”¹å˜å…¶è½¯åˆ é™¤çš„æ¡ä»¶ï¼Œ<code>thinkphp</code> åˆ™æ˜¯é€šè¿‡é…ç½®æ¨¡å‹å±æ€§ã€‚å¦‚æœç»§æ‰¿äº† <code>CatchModel</code>, é‚£ä¹ˆè½¯åˆ é™¤çš„æ¡ä»¶ä¼šè‡ªåŠ¨å˜æˆ<code>deleted_at = 0</code>ã€‚</p> <h2 id="query-è®°å½•"><a href="#query-è®°å½•" class="header-anchor">#</a> Query è®°å½•</h2> <p><code>CatchAdmin</code> æä¾›äº†å¾ˆæ–¹ä¾¿çš„ SQL æ—¥å¿—è®°å½•æ–¹æ³•ã€‚åªéœ€è¦åœ¨ <code>AppServiceProvider</code> é…ç½®å¦‚ä¸‹ä»£ç ã€‚</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Query</span><span class="token operator">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token variable">$latest</span><span class="token operator">=</span><span class="token constant boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœæœ€æ–°çš„ <code>SQL</code> å°†ä¼šæŒ‰ç…§æ—¶é—´å€’å™è®°å½•ï¼Œå¦‚æœè®¾ç½® <code>false</code>ï¼Œé‚£ä¹ˆå°†ä¼šæŒ‰ç…§æ—¶é—´æ­£åºè®°å½•ã€‚é»˜è®¤å€’å™è®°å½•ã€‚<code>CatchAdmin</code> çš„ <code>SQL</code> ä»¥ä¸€æ¬¡è¯·æ±‚ä¸ºåŸºç¡€ï¼Œä»¥ä¼šè½¦ä½œä¸ºåˆ†å‰²ã€‚</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/catch-admin/document/edit/master/docs/laravel/model.md" target="_blank" rel="noopener noreferrer">åœ¨ Github ç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/laravel/module.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        æ¨¡å—
      </a></span> <span class="next"><a href="/laravel/console.html">
        å‘½ä»¤
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fe5d4cb6.js" defer></script><script src="/assets/js/2.1cef47df.js" defer></script><script src="/assets/js/30.c7732a2c.js" defer></script>
  </body>
</html>